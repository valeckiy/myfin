{% extends 'base.html' %}

{% block body %}


    <h2>Ваші фінанси:</h2>

    <table>
       <tr><th>Гаманець</th><th>Баланс</th><th>Валюта</th><th>Додати транзакцію</th><th></th></tr>
        {% for w_row in el_wallets %}
            <tr>
                  <td>{{ w_row.name }}</td>
                  <td>{{ w_row.total }}</td>             
                  <td>{{ w_row.currency}}</td>             
               
                 <td>
                    <form method='POST' action='/'>
                         {% csrf_token %}
                         <input  type="hidden" id="id" name="id" value='{{ w_row.id }}' />
                         <input  type="hidden" id="actions" name="actions" value='transaction_add' />
                         Категорія:
                         <select name="category">
                          {% for c_row in el_categories %}
                          
                           <option id = '{{ c_row.id }}' value='{{ c_row.id }}'>{{ c_row.name }}
                           
                           {% if c_row.direction == 'Profit' %} (Дохід) 
                           {% else %} (Витрата) 
                           {% endif %}   
                           
                           </option>
                           
                           {% endfor %}                            
                         </select>
                         
                         Сума:<input  type='number' id="sum_transaction" name="sum_transaction" value=0 />
                         
                         
                       <input value='+' type='SUBMIT' >

                    </form>
                 </td>

                <td>
                    <form method='POST' action='/'>
                          {% csrf_token %}
                         <input  type="hidden" id="id" name="id" value='{{ w_row.id }}' />
                         <input  type="hidden" id="actions" name="actions" value='wallet_delete' />
                        <p><input value='Видалити гаманець' type='SUBMIT'></p>
                      
                    </form>
                </td>                                
            </tr>
        {% endfor %}
    </table>
    
    <table>
       <tr><td></td></tr>
       <tr><td>
       <form method='GET' action='/add_wallet'>
             {% csrf_token %}   
            <input value='Створити новий гамнець' type='SUBMIT'>
       </form>
       </td><td>
       <form method='GET' action='/categories'>
             {% csrf_token %}
           <input value='Керування категоріями' type='SUBMIT'>
       </form>
       </td><td>
       <form method='GET' action='/transaction'>
             {% csrf_token %}
           <input value='Керування транзакціями' type='SUBMIT'>
       </form>
       </td><td>
                  
       </td>
       </tr>
     </table>
     
     
     <h2>Останні транзакції:</h2>

      <table>
          <tr>
              <th>Дата</th> <th>Гаманець</th> <th>Категорія</th> <th>Сума</th> <th>Валюта</th>             
          </tr>
          {% for w_row in el_transaction %}
              <tr>
                  <td>{{ w_row.date }}</td>
                  <td>{{ w_row.wallet }}</td>             
                  <td>{{ w_row.category }}</td>          
                  <td>{{ w_row.suma }}</td>  
                  <td>{{ w_row.currency }}</td> 
                  <td>
                      <form method='POST' action='/'>
                       {% csrf_token %}
                           <input  type="hidden" id="id" name="id" value='{{ w_row.id }}' />
                           <input  type="hidden" id="id_wallet" name="id_wallet" value='{{ w_row.id_wallet }}' />
                            <input  type="hidden" id="sum_transaction" name="sum_transaction" value='{{ w_row.suma}}' />
                           <input  type="hidden" id="actions" name="actions" value='transaction_delete' />
                          <p><input value='Видалити' type='SUBMIT'></p>
                        
                      </form>
                  </td>                                
              </tr>
          {% endfor %}
      </table>
      
{% endblock %}